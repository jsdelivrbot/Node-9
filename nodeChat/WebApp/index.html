<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Node Chat</title>

    <script src="jspm_packages/system.js" type="text/javascript"></script>
    <script src="config.js" type="text/javascript"></script>
    <script>
      var files = [
        'bootstrap/css/bootstrap.min.css!',
        './css/index.css!',
        //'font-hack/?/?.css!',
        'jquery/jquery.min',
        'bootstrap/js/bootstrap.min',
      ];

      function check(file) {console.log(file.substring(0, file.indexOf('!')));
        return System.has(file.substring(0, file.indexOf('!')));
      }

      files.reduce(function(prev, current) {
        return prev.then(function() {
          return System.import(current);
        });
      }, Promise.resolve()).then(function() {
        //@todo: fixme
        //if (files.every(check) === false) {
        if (false) {
          //@todo: show in browser by adding to body
          throw new Error('Missing files, aborting...');
        }
        else {
          System.import('js/app.js').catch(function(error) {
            setTimeout(function() {
              throw error.stack || error;
            });
          });
        }
      });
    </script>
  </head>
  <body>
  </body>
</html>
